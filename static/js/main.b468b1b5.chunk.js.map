{"version":3,"sources":["top-panel/top-panel.js","top-panel/index.js","skin-layer/skin-layer.js","skin-layer/index.js","skin-layers/skin-layers.js","skin-layers/index.js","redactor/redactor.js","redactor/index.js","tools/tools.js","tools/index.js","app/app.js","app/index.js","index.js"],"names":["TopPanel","_jsx","className","children","_jsxs","role","type","placeholder","size","SkinLayers","React","Component","constructor","arguments","state","id","this","props","src","isMain","onEdit","onVisible","label","componentDidMount","render","onDeleted","onToggleHide","hidden","chosen","onClick","disabled","SkinLayer","_ref","skinLayers","elements","map","item","itemProps","camera","scene","renderer","controls","skinTexture","canvas","drawingCanvas","drawingContext","container","visibleLayers","color","layers","i","raycaster","THREE","mouse","onClickPosition","onMouseDown","evt","preventDefault","button","array","getMousePosition","clientX","clientY","fromArray","intersects","getIntersects","length","uv","enabled","onMouseUp","onMouseMove","intersect","index","face","materialIndex","object","material","transformUv","drawPixel","x","y","dom","rect","getBoundingClientRect","rendererXY","getSize","left","width","top","height","point","objects","set","setFromCamera","intersectObjects","CanvasTexture","parentTexture","_canvas","_context2D","_image","createImageData","_data","data","_parentTexture","push","image","createLeg","dx","dy","owerlay","transparent","legSides","clone","addParent","repeat","offset","legMaterials","side","createArm","armSides","armMaterials","createHead","headSides","rotation","Math","PI","headMaterials","createBody","bodySides","bodyMaterials","animate","domElement","clientWidth","clientHeight","setSize","aspect","updateProjectionMatrix","resizeCanvasToDisplaySize","requestAnimationFrame","update","sumUpLayers","clearRect","visible","drawImage","layerCanvas","updateTextures","addNewLayer","newLayer","layer","document","createElement","layerContext","getContext","imageSmoothingEnabled","fillStyle","beginPath","fill","load","newElement","layersUpdate","prototype","_xCross","_yCross","indexOf","round","_draw","_updateTextures","needsUpdate","Redactor","position","querySelector","antialias","setPixelRatio","window","devicePixelRatio","setClearColor","OrbitControls","target","mouseButtons","LEFT","ROTATE","MIDDLE","MOUSEWHEEL","DOLLY","RIGHT","minDistance","maxDistance","getElementById","appendChild","addEventListener","style","display","magFilter","paint","e","offsetX","offsetY","setupCanvasDrawing","skinLayersData","rightLeg","leftLeg","rightLegO","leftLegO","add","rightArm","leftArm","rightArmO","leftArmO","head","headO","body","bodyO","skinInit","hexColor","filter","el","a","forEach","element","includes","Tools","displayColorPicker","handleClick","setState","handleClose","handleChange","rgb","console","log","styles","reactCSS","borderRadius","background","r","g","b","swatch","padding","boxShadow","popover","zIndex","cover","right","bottom","onColorChange","onSwatchClick","SketchPicker","onChange","App","maxId","createSkinLayer","toggleProperty","onToggleChosen","_ref2","hex","deleteItem","_ref3","findIndex","slice","undefined","arr","propName","idx","oldItem","newItem","ReactDOM"],"mappings":"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","file":"static/js/main.b468b1b5.chunk.js","sourcesContent":["import React from 'react';\n\nimport \"./top-panel.css\"\n\nconst TopPanel = () => {\n    return (\n        <div className=\"pos-f-t\">\n            <nav className=\"navbar \" >\n                <h4 className=\" col-md-3\" >MC Skin Editor</h4>\n                <div className=\"container col-md-7\">                    \n                   \n                    <div className=\"btn-group\" role=\"group\" >\n                        <button className=\"btn \" type=\"button\" >2d</button>\n                        <button className=\"btn \" type=\"button\" >3d</button>\n                    </div>\n                    <div className=\"btn-group\" role=\"group\" aria-label=\"Basic example\">\n                        <button className=\"btn  \" type=\"button\" >undo</button>\n                        <button className=\"btn  \" type=\"button\" >redo</button>\n                    </div>\n                    <div className=\"btn-group\" role=\"group\" aria-label=\"Basic example\">\n                        <button className=\"btn  \" type=\"button\" >-</button>\n                        <input className=\"input \" placeholder=\"100%\" size=\"auto\"></input>\n                        <button className=\"btn  \" type=\"button\" >+</button>\n                        <button className=\"btn \" type=\"button\" >[+]</button>\n                    </div>                    \n                </div>\n                <div className=\"btn-group col-md-2\" role=\"group\" aria-label=\"Basic example\">\n                        <button className=\"btn btn-primary\" type=\"button\" >AIPhoto</button>\n                        <button className=\"btn btn-primary\" type=\"button\" >Export</button>\n                </div>\n            </nav>\n        </div>\n    );\n};\n\nexport default TopPanel;","import TopPanel from './top-panel';\n\nexport default TopPanel;","import React from 'react';\n\nimport \"./skin-layer.css\"\n\n\n\nexport default class SkinLayers extends React.Component {\n    state = {\n        id: this.props.id,\n        src: this.props.src,\n        isMain: this.props.isMain,\n        onEdit: false,\n        onVisible: false,\n        label: this.props.label,\n    }\n   \n\n    componentDidMount() {\n\n    }\n\n    render() {\n        const { onDeleted, onToggleHide} = this.props;\n        //let className = 'skin-layer';\n\n        if (this.props.hidden) {\n            //className += ' hidden';\n        }\n\n        if (this.props.chosen){\n            //className += ' chosen';\n        }\n\n\n        return (   \n            <div className=\"list-group-item list-group-item-action\">\n                {this.state.isMain? (\n                    <div>\n                        <label>{this.state.label}</label>\n                        <button type=\"button\"\n                            className=\"btn btn-outline-info float-right\"\n                            size=\"sm\"\n                            onClick={onToggleHide} disabled>\n                        hide\n                        </button>\n                    </div>\n                ):(\n                    <div>\n\n                        <label>{this.state.label}</label>\n                        <button type=\"button\"\n                            className=\"btn btn-outline-danger float-right\"\n                            onClick={onDeleted}>\n                            del\n                        </button>\n                        <button type=\"button\"\n                            className=\"btn btn-outline-info float-right\"\n                            onClick={onToggleHide}>\n                        hide\n                        </button>\n                    </div>\n                )}\n            </div>\n        );\n    }\n};\n","import SkinLayer from './skin-layer';\n\nexport default SkinLayer;","import React from 'react';\n\nimport SkinLayer from '../skin-layer'\nimport \"./skin-layers.css\"\n\nconst SkinLayers = ({skinLayers, onDeleted, onToggleHide}) => {\n    const elements = skinLayers.map((item) => {\n        const {id, ...itemProps} = item;\n        return (\n            <li key={id} className=\"skin-layer\">\n                <SkinLayer {... itemProps}\n                onDeleted = {() => onDeleted(id)}\n                onToggleHide = {() => onToggleHide(id)}/>\n            </li>\n        )\n    })\n\n\n\n    return (\n        <div className=\"d-block p-1 \">\n            <h5>SkinLayers</h5>\n            <ul className=\"item-list list-group list-group-flush list-group-item-action\">\n                {elements}\n            </ul>\n        </div>\n    );\n};\n\nexport default SkinLayers;","import SkinLayers from './skin-layers';\n\nexport default SkinLayers;","import React from 'react';\nimport * as THREE from 'three';\nimport {OrbitControls} from 'three/examples/jsm/controls/OrbitControls'\n\nimport './redactor.css';\n//import SkinLayers from '../skin-layers';\n\nlet camera, scene, renderer, controls, skinTexture;\nlet canvas, drawingCanvas, drawingContext;\nlet container;\nlet visibleLayers;\nlet color;\nlet layers = [];\nvar i = 0;\n\nconst raycaster = new THREE.Raycaster();\nconst mouse = new THREE.Vector2();\nconst onClickPosition = new THREE.Vector2();\n//var skinToLoad = 'https://texture.namemc.com/ae/fc/aefc9682a40ebaf0.png';\n//var skinToLoad2 = 'https://texture.namemc.com/c8/68/c86868b8b045944d.png';\n\nfunction init() {\n    camera = new THREE.PerspectiveCamera( 80, 1, 0.1, 1000 );    \n    camera.position.set( 0, 0, 40);\n\n    scene = new THREE.Scene();\n    \n    renderer = new THREE.WebGLRenderer( {canvas: document.querySelector(\"canvas\"), antialias: true } );\n    renderer.setPixelRatio( window.devicePixelRatio );\n    renderer.setClearColor(0x555555);\n    //renderer.setSize( window.innerWidth / 2, window.innerHeight);\n\n    controls = new OrbitControls( camera, renderer.domElement );\n    controls.target.set(0, 0, 0);\n    controls.mouseButtons = {\n        LEFT: THREE.MOUSE.ROTATE,\n        MIDDLE: THREE.MOUSE.ROTATE,\n        MOUSEWHEEL: THREE.MOUSE.DOLLY,\n        RIGHT: THREE.MOUSE.ROTATE\n    }\n    controls.minDistance = 20;\n    controls.maxDistance = 50;\n    controls.update();\n    \n\tcontainer = document.getElementById( \"container\" );\n\tcontainer.appendChild( renderer.domElement );\n\tcontainer.addEventListener( 'pointermove', onMouseMove );\n    container.addEventListener( 'pointerdown', onMouseDown );\n    container.addEventListener( 'pointerup', onMouseUp );\n   // window.addEventListener( 'resize', onWindowResize );    \n}\n\nfunction onMouseDown(evt) {\n    evt.preventDefault();\n    if (evt.button === 0) {\n        const array = getMousePosition( container, evt.clientX, evt.clientY );\n        onClickPosition.fromArray( array );\n        const intersects = getIntersects( onClickPosition, scene.children );\n        if ( intersects.length > 0 && intersects[ 0 ].uv ) {\n            controls.enabled = false;\n        } else { controls.enabled = true; }\n    }\n\t\n}\n\nfunction onMouseUp(evt) {\n    evt.preventDefault();\n    controls.enabled = true;    \n}\n\nfunction onMouseMove( evt ) {\n    if (controls.enabled === false){\n        const array = getMousePosition( container, evt.clientX, evt.clientY );\n        onClickPosition.fromArray( array );\n        const intersects = getIntersects( onClickPosition, scene.children );\n\n        if (intersects.length > 0 && intersects[0].uv) {\n            const intersect = intersects[0];\n            const uv = intersect.uv;\n            const index = intersect.face.materialIndex;\n            intersect.object.material[index].map.transformUv(uv);\n            canvas.drawPixel( uv.x, uv.y );\n        }\n    }\n}\n\nfunction getMousePosition( dom, x, y ) {\n\tconst rect = dom.getBoundingClientRect();\n    let rendererXY = new THREE.Vector2();\n    renderer.getSize(rendererXY);\n\treturn [ ( x - rect.left ) / rendererXY.width, ( y - rect.top ) / rendererXY.height ];\n}\n\nfunction getIntersects( point, objects ) {\n\tmouse.set( ( point.x * 2 ) - 1, - ( point.y * 2 ) + 1 );\n\traycaster.setFromCamera( mouse, camera );\n\treturn raycaster.intersectObjects( objects );\n}\n\nfunction CanvasTexture( parentTexture ) {\n    this._canvas = drawingCanvas || null;\n    this._context2D = drawingContext || null; \n    this._image = drawingContext.createImageData(drawingCanvas.width, drawingCanvas.height);\n\tthis._data = this._image.data;\n    if ( parentTexture ) {\n        this._parentTexture.push( parentTexture );\n        parentTexture.image = this._canvas;\n    }\n}\n\nCanvasTexture.prototype = {\n    constructor: CanvasTexture,\n    _xCross: -1,\n    _yCross: -1,\n    _parentTexture: [],\n\n    \n    addParent: function ( parentTexture ) {\n        if ( this._parentTexture.indexOf( parentTexture ) === - 1 ) {\n            this._parentTexture.push( parentTexture );\n            parentTexture.image = this._canvas;\n        }\n    },\n\n    drawPixel: function ( x, y ) {\n        this._xCross = Math.round(x * this._canvas.width - 0.5);\n        this._yCross = Math.round(y * this._canvas.height - 0.5);\n        this._draw();\n    },\n\n    updateTextures: function () {\n        this._updateTextures();\n    },\n\n    _updateTextures: function () {\n        for ( let i = 0; i < this._parentTexture.length; i ++ ) {\n            this._parentTexture[ i ].needsUpdate = true;\n        }\n    },\n\n    _draw: function () {\n        if ( ! this._context2D ) return;        \n\n        /*\n        var color = {r:0, g: 0, b: 255, a: 255};\n        var index = 4 * (this._canvas.width * this._yCross + this._xCross);\n        this._context2D.drawImage(drawingCanvas, 0, 0);\n        this._image = this._context2D.createImageData(drawingCanvas.width, drawingCanvas.height);\n        this._data = this._image.data;\n        this._data[index + 0] = color.r;\n        this._data[index + 1] = color.g;\n        this._data[index + 2] = color.b;\n        this._data[index + 3] = color.a;\n        */\n        \n        // Background.\n        this._context2D.drawImage( drawingCanvas, 0, 0 );\n        \n        // Fill pixel.\n        this._context2D.fillStyle = color || \"#000000\";\n        this._context2D.beginPath();\n        this._context2D.rect( this._xCross, this._yCross, 1, 1);\n        this._context2D.fill();\n        this._updateTextures();\n        \n    }\n};\n\nfunction setupCanvasDrawing() {\n    // get canvas and context\n    drawingCanvas = document.getElementById( 'drawing-canvas' );\n    drawingContext = drawingCanvas.getContext( '2d' );\n   \n    // hide canvas\n    drawingCanvas.style.display=\"none\";\n    \n    skinTexture = new THREE.CanvasTexture(drawingCanvas);\n    skinTexture.magFilter = THREE.NearestFilter;\n    \n\tcanvas = new CanvasTexture( skinTexture );\n    sumUpLayers();\n    \n    // set the variable to keep track of when to draw\n    let paint = false;\n    drawingCanvas.addEventListener( 'pointerdown', function ( e ) {\n        if ( e.button === 0 ) { paint = true; };\n        if ( paint ) canvas.drawPixel( e.offsetX /4 /64, e.offsetY /4 /64);\n    } );\n    drawingCanvas.addEventListener( 'pointermove', function ( e ) {\n        if ( paint ) canvas.drawPixel( e.offsetX /4 /64, e.offsetY /4 /64);\n    } );\n    window.addEventListener('pointerup', function () {\n        paint = false; \n    } );    \n};\n\n//#region skin init\nfunction skinInit(){\n    var rightLeg = createLeg(0, 0, false);\n    rightLeg.position.set(-2, -10, 0);\n    var leftLeg = createLeg(0.25, -0.5, false);\n    leftLeg.position.set(2, -10, 0);\n    var rightLegO = createLeg( 0, -0.25, true);\n    rightLegO.position.set(-2.1184, -10, 0);\n    var leftLegO = createLeg(0, -0.5, true);\n    leftLegO.position.set(2.1184, -10, 0);\n    scene.add(rightLeg, leftLeg, rightLegO, leftLegO);\n\n    var rightArm = createArm(0.625, 0, false);\n    rightArm.position.set(-6, 2,  0);\n    var leftArm = createArm(0.5, -0.5, false);\n    leftArm.position.set(6, 2,  0);\n    var rightArmO = createArm(0.625, -0.25, true);\n    rightArmO.position.set(-6.246, 2,  0);\n    var leftArmO = createArm( 0.75, -0.5, true);\n    leftArmO.position.set(6.246, 2, 0);    \n    scene.add(rightArm, leftArm, rightArmO, leftArmO);\n    \n    var head = createHead(0, 0, false);\n    head.position.set(0, 12,  0);\n    var headO = createHead(0.5, 0, true);\n    headO.position.set(0, 12,  0);\n    scene.add(head, headO);\n\n    var body = createBody(0, 0, false);\n    body.position.set(0, 2,  0);\n    var bodyO = createBody(0, -0.25, true);\n    bodyO.position.set(0, 2,  0);\n    scene.add(body, bodyO);\n};\n\nfunction createLeg(dx, dy, owerlay) {\n    var legSides  = [];\n    for (i = 0; i < 6; i++){\n        legSides.push(skinTexture.clone());\n        canvas.addParent(legSides[i]);\n    }\n    var size, transparent;\n    owerlay? size = 0.25 : size = 0;\n    owerlay? transparent = true : transparent = false;\n    legSides[0].repeat.set(0.0625       , 0.1875      );\n    legSides[0].offset.set(0.125  + dx  , 0.5    + dy );\n    legSides[1].repeat.set(0.0625       , 0.1875      );\n    legSides[1].offset.set(0.0    + dx  , 0.5    + dy );\n    legSides[2].repeat.set(0.0625       , 0.0625      );\n    legSides[2].offset.set(0.0625 + dx  , 0.6875 + dy );            \n    legSides[3].repeat.set(0.0625       , 0.0625      );\n    legSides[3].offset.set(0.125  + dx  , 0.6875 + dy );            \n    legSides[4].repeat.set(0.0625       , 0.1875      );\n    legSides[4].offset.set(0.0625 + dx  , 0.5    + dy );            \n    legSides[5].repeat.set(0.0625       , 0.1875      );\n    legSides[5].offset.set(0.1875 + dx  , 0.5    + dy );\n    var legMaterials = [];\n    for (i = 0; i < 6; i++){\n        legMaterials.push(new THREE.MeshBasicMaterial( \n            {map:legSides[i], transparent:transparent, side:THREE.DoubleSide}));\n    }\n    return new THREE.Mesh( new THREE.BoxGeometry( 4 + size, 12 + size, 4 + size), legMaterials ); \n};\nfunction createArm(dx, dy, owerlay) {\n    /// TODO: SLIM SKIN\n    var armSides  = []; \n    for (i = 0; i < 6; i++){\n        armSides.push(skinTexture.clone());\n        canvas.addParent(armSides[i]);\n    }\n    var size, transparent;\n    owerlay? size = 0.25 : size = 0;\n    owerlay? transparent = true : transparent = false;\n    armSides[0].repeat.set(0.0625       , 0.1875      );\n    armSides[0].offset.set(0.125  + dx  , 0.5    + dy );\n    armSides[1].repeat.set(0.0625       , 0.1875      );\n    armSides[1].offset.set(0.0    + dx  , 0.5    + dy );\n    armSides[2].repeat.set(0.0625       , 0.0625      );\n    armSides[2].offset.set(0.0625 + dx  , 0.6875 + dy );            \n    armSides[3].repeat.set(0.0625       , 0.0625      );\n    armSides[3].offset.set(0.125  + dx  , 0.6875 + dy );            \n    armSides[4].repeat.set(0.0625       , 0.1875      );\n    armSides[4].offset.set(0.0625 + dx  , 0.5    + dy );            \n    armSides[5].repeat.set(0.0625       , 0.1875      );\n    armSides[5].offset.set(0.1875 + dx  , 0.5    + dy );\n    var armMaterials = [];\n    for (i = 0; i < 6; i++){\n        armMaterials.push(new THREE.MeshBasicMaterial( \n            {map:armSides[i], transparent:transparent, side:THREE.DoubleSide}));\n    }\n    return new THREE.Mesh( new THREE.BoxGeometry( 4 + size, 12 + size, 4 + size), armMaterials )\n};\nfunction createHead( dx, dy, owerlay) {\n    var headSides  = [];\n    \n    for (i = 0; i < 6; i++){\n        headSides.push(skinTexture.clone());\n        canvas.addParent(headSides[i]);\n    }\n    var size, transparent;\n    owerlay? size = 1 : size = 0;\n    owerlay? transparent = true : transparent = false;\n    headSides[0].offset.set(0.25  + dx , 0.75 );\n    headSides[1].offset.set(0     + dx , 0.75 );\n    headSides[2].offset.set(0.125 + dx , 0.875);\n    headSides[3].offset.set(0.375 + dx , 1    );\n    headSides[3].rotation = Math.PI;\n    headSides[4].offset.set(0.125 + dx , 0.75 );\n    headSides[5].offset.set(0.375 + dx , 0.75 );         \n    var headMaterials = [];\n    for (i = 0; i < 6; i++){\n        headSides[i].repeat.set( 0.125 , 0.125 );\n        headMaterials.push(new THREE.MeshBasicMaterial( \n            {map:headSides[i], transparent:transparent, side:THREE.DoubleSide}));\n    }\n    return new THREE.Mesh( new THREE.BoxGeometry( 8 + size, 8 + size, 8 + size), headMaterials );\n};\nfunction createBody(dx, dy, owerlay) {\n    var bodySides  = [];\n    \n    for (i = 0; i < 6; i++){\n        bodySides.push(skinTexture.clone());\n        canvas.addParent(bodySides[i]);\n    }\n    var size, transparent;\n    owerlay? size = 0.25 : size = 0;\n    owerlay? transparent = true : transparent = false;   \n    bodySides[0].repeat.set(0.0625 , 0.1875 );\n    bodySides[0].offset.set(0.4375 , 0.5 + dy);\n    bodySides[1].repeat.set(0.0625 , 0.1875 );\n    bodySides[1].offset.set(0.25   , 0.5 + dy);\n    bodySides[2].repeat.set(0.125  , 0.0625 );\n    bodySides[2].offset.set(0.3125 , 0.6875 + dy);            \n    bodySides[3].repeat.set(0.125  , 0.0625 );\n    bodySides[3].offset.set(0.4375 , 0.6875 + dy);\n    bodySides[4].repeat.set(0.125  , 0.1875 );\n    bodySides[4].offset.set(0.3125 , 0.5 + dy);            \n    bodySides[5].repeat.set(0.125  , 0.1875 );\n    bodySides[5].offset.set(0.5    , 0.5 + dy);\n    var bodyMaterials = [];\n    for (i = 0; i < 6; i++){\n        bodyMaterials.push(new THREE.MeshBasicMaterial( \n            {map:bodySides[i], transparent:transparent, side:THREE.DoubleSide}));\n    }\n    return new THREE.Mesh( new THREE.BoxGeometry( 8 + size, 12 + size, 4 + size), bodyMaterials );\n};\n//#endregion\n\n\nfunction resizeCanvasToDisplaySize() {\n    const canvas = renderer.domElement;\n    const width = canvas.clientWidth;\n    const height = canvas.clientHeight;\n    if (canvas.width !== width ||canvas.height !== height) {\n      // you must pass false here or three.js sadly fights the browser\n      renderer.setSize(width, height, false);\n      camera.aspect = width / height;\n      camera.updateProjectionMatrix();\n  \n      // set render target sizes here\n    }\n}\n\nfunction animate() {\n    resizeCanvasToDisplaySize();\n    requestAnimationFrame( animate );\n    controls.update();\n    renderer.render( scene, camera );\n};\n\nfunction sumUpLayers() {\n    drawingContext.clearRect(0, 0, drawingCanvas.width, drawingCanvas.height);\n    for(i = 0; i < layers.length; i++){\n        if( layers[i].visible){\n            drawingContext.drawImage(layers[i].layerCanvas, 0, 0);\n        }\n    }\n    canvas.updateTextures();\n}\n\nfunction addNewLayer(newLayer) {\n    // Create the layer as a new canvas\n    var layer = document.createElement(\"canvas\");\n    var layerContext = layer.getContext(\"2d\");    \n    layerContext.imageSmoothingEnabled = false;\n    if (newLayer.src === ''){\n        layerContext.clearRect(0, 0, 64, 64);\n        layerContext.fillStyle = \"#777777\";\n        layerContext.beginPath();\n        layerContext.rect( 8, 0, 16, 8); //top head\n        layerContext.rect( 0, 8, 32, 8); // front and back\n        layerContext.rect( 4, 16, 8, 4);\n        layerContext.rect( 20, 16, 16, 4);\n        layerContext.rect( 44, 16, 8, 4);\n        layerContext.rect( 0, 20, 56, 12);\n        layerContext.rect( 20, 48, 8, 4);\n        layerContext.rect( 36, 48, 8, 4);\n        layerContext.rect( 20, 52, 32, 12);\n        layerContext.fill();\n    } else {\n        var image = new THREE.ImageLoader().load(newLayer.src, function (  ) {\n            layerContext.drawImage(image, 0, 0);\n            sumUpLayers();\n        })\n    }\n    var newElement = {\n        id: newLayer.id,\n        layerCanvas : layer,\n        visible : true\n    }\n\n    /* Add it to our layers array */\n    layers.push(newElement);\n      \n}\n\n\n\nfunction layersUpdate(skinLayers) {\n\n    for(i = 0; i < skinLayers.length; i++){\n        addNewLayer(skinLayers[i]);\n    }\n    sumUpLayers();\n    \n}\n\nfunction checkSkinLayers(skinLayers){     \n\n    layers.forEach(element => {\n        if (visibleLayers.includes( element.id )){\n            element.visible = true;\n        } else {\n            element.visible = false;\n        }\n    });\n\n    if(layers.length > 0) {\n        \n        sumUpLayers();\n    }\n    if ( layers.length !== skinLayers.length && layers.length > 0){\n        layersUpdate(skinLayers);\n    }\n}\n\nfunction setColor(hexColor) {\n    color = hexColor;\n}\n\nclass Redactor extends React.Component {\n\n    componentDidMount() {        \n\t\tinit();\n\t\tsetupCanvasDrawing();\n        layersUpdate(this.props.skinLayersData);\n        skinInit();\n        animate();\n    }\n\n    render() {\n\n        if ( visibleLayers !== this.props.skinLayersData.filter((el) => el.visible).map(a => a.id) ) {\n            visibleLayers = this.props.skinLayersData.filter((el) => el.visible).map(a => a.id);\n            checkSkinLayers(this.props.skinLayersData);\n        }\n        setColor(this.props.hexColor);\n\n        return (\n            <div id=\"container\" className=\"align-self-stretch p-1\" >\n               \n                <canvas id=\"renderer-canvas\" className=\"renderer-canvas \" ></canvas>\n                <canvas id=\"drawing-canvas\" className=\"drawing-canvas \" height=\"64\" width=\"64\"></canvas>\n                \n                \n            </div>\n        )\n        //<div ref={ref => (this.mount = ref)} />\n    }\n}\n\nexport default Redactor;","import Redactor from './redactor';\n\nexport default Redactor;","import React from 'react';\nimport { SketchPicker } from 'react-color';\nimport reactCSS from 'reactcss'\n\n\nimport \"./tools.css\"\n\nexport default class Tools extends React.Component {\n    state = {\n        displayColorPicker: this.props.displayColorPicker,\n        color: this.props.color,\n    };\n\n    handleClick = () => {\n        this.setState({ displayColorPicker: !this.state.displayColorPicker })\n    };\n\n    handleClose = () => {\n        this.setState({ displayColorPicker: false })\n    };\n\n    handleChange = (color) => {\n        this.setState({ color: color.rgb })\n        console.log(color);\n    };\n\n    render() {\n        const styles = reactCSS({\n            'default': {\n              color: {\n                width: '24px',\n                height: '24px',\n                borderRadius: '2px',\n                background: `rgba(${ this.props.color.r }, ${ this.props.color.g }, ${ this.props.color.b }, ${ this.state.color.a })`,\n              },\n              swatch: {\n                padding: '5px',\n                background: '#fff',\n                borderRadius: '1px',\n                boxShadow: '0 0 0 1px rgba(0,0,0,.1)',\n                display: 'inline-block',\n              },\n              popover: {\n                position: 'absolute',\n                zIndex: '5',\n              },\n              cover: {\n                position: 'fixed',\n                top: '0px',\n                right: '0px',\n                bottom: '0px',\n                left: '0px',\n              },\n            },\n        });\n        \n        const {color, onColorChange, onSwatchClick, displayColorPicker} = this.props;\n        \n        return (\n            <div className=\"d-block p-1\">\n                <h5>Tools</h5>\n                <ul className=\"item-list list-group list-group-flush list-group-item-action\">\n                    <li className=\"list-group-item list-group-item-action\">\n                        <span className = 'row justify-content-center' >Skin parts</span>\n                        <span className = 'row '>\n                            <span className = 'col-md-6 justify-content-center'>Body</span>\n                            <span className = 'col-md-6 justify-content-center'>Overlay</span>\n                        </span>\n                        <span className = 'row'>\n                            <span className = 'col-md-6'>\n                                <span className = 'row d-flex justify-content-center'>\n                                    <div  className = \" body-part\" style={{\n                                        width: '16px',\n                                        height: '16px',                                        \n                                        }}  >\n                                    </div>\n                                </span>\n                                <span className = 'row justify-content-center'>\n                                    <div  className = \" body-part limb\" style={{ }}  >\n                                    </div>\n                                    <div className = \" body-part\"  style={{\n                                        width: '16px',\n                                        height: '24px',                                            \n                                        }}  >\n                                    </div>\n                                    <div className = \" body-part limb\"  style={{ }}  >\n                                    </div>\n                                </span>\n                                <span className = \"row justify-content-center\">\n                                    <div  className = \" body-part limb\" style={{ }}  >\n                                    </div>\n                                    <div  className = \" body-part limb\" style={{ }}  >\n                                    </div>\n                                </span>\n                            </span>\n                            <span className = 'col-md-6'>\n                                <span className = 'row d-flex justify-content-center'>\n                                    <div  className = \" body-part\" style={{\n                                        width: '16px',\n                                        height: '16px',                                        \n                                        }}  >\n                                    </div>\n                                </span>\n                                <span className = 'row justify-content-center'>\n                                    <div  className = \" body-part limb\" style={{ }}  >\n                                    </div>\n                                    <div className = \" body-part\"  style={{\n                                        width: '16px',\n                                        height: '24px',                                            \n                                        }}  >\n                                    </div>\n                                    <div className = \" body-part limb\"  style={{ }}  >\n                                    </div>\n                                </span>\n                                <span className = \"row justify-content-center\">\n                                    <div  className = \" body-part limb\" style={{ }}  >\n                                    </div>\n                                    <div  className = \" body-part limb\" style={{ }}  >\n                                    </div>\n                                </span>\n                            </span>\n                           \n                        </span>\n                    </li>\n                    <li className=\"list-group-item list-group-item-action\">Bucket\n                       \n                    </li>\n                    <li className=\"list-group-item list-group-item-action\">Pan</li>\n                    <li className=\"list-group-item list-group-item-action\">\n                        <label>Color</label>\n                        <div className=\" float-right\" style={ styles.color }  onClick={ onSwatchClick }/>\n                        <div>\n                            { displayColorPicker ? <div style={ styles.popover} >\n                            <div style={ styles.cover} onClick={ onSwatchClick }/>\n                            <SketchPicker color={ color } onChange={ onColorChange }  />\n                            </div> : null }\n\n                        </div>\n                    </li>\n                    <li className=\"list-group-item list-group-item-action\">Transparent</li>\n                    <li className=\"list-group-item list-group-item-action\">Easer</li>\n                    <li className=\"list-group-item list-group-item-action\">Random colors</li>\n                </ul>\n            </div>\n        );\n    }\n};\n","\nimport Tools from './tools';\n\nexport default Tools;","import React from 'react';\n//import ReactDOM from 'react-dom';\n\n\n//import AppHeader from '../app-header';\nimport TopPanel from '../top-panel';\nimport SkinLayers from '../skin-layers';\n//import Library from '../library';\nimport Redactor from '../redactor';\nimport Tools from '../tools';\n\nimport './app.css';\n\n\nexport default class App extends React.Component {\n    maxId = 100;\n    state = {\n        skinLayersData: [\n            this.createSkinLayer('main Layer', '', true ),\n            this.createSkinLayer('maid HBomb94', 'https://texture.namemc.com/ae/fc/aefc9682a40ebaf0.png' ),\n            this.createSkinLayer('Ramboob', 'https://texture.namemc.com/c8/68/c86868b8b045944d.png' ),\n        ],\n        displayColorPicker: false,\n        color: {\n          r: '0',\n          g: '0',\n          b: '0',\n          a: '1',\n        },\n        hexColor : \"#000000\"\n        \n    }\n\n    createSkinLayer(label, src, isMain) {\n        if(isMain === undefined){\n            return {\n                label,\n                id: 'l' + this.maxId++,\n                src,\n                visible: true,\n                chosen: false,\n                isMain: false,\n            }\n        } else {                \n            return {\n                label,\n                id: 'l' + this.maxId++,\n                src,\n                visible: true,\n                chosen: false,\n                isMain\n            }\n        }\n    }\n\n\n    onToggleHide = (id) => {\n        this.setState(({ skinLayersData }) => {\n            return {\n                skinLayersData: this.toggleProperty(skinLayersData, id, 'visible') \n            };\n        });\n    };\n\n    onToggleChosen = (id) => {\n        this.setState(({ skinLayersData }) => {\n            return {\n                skinLayersData: this.toggleProperty(skinLayersData, id, 'chosen')\n            };\n        });\n    };\n\n    toggleProperty(arr, id, propName) {\n        const idx = arr.findIndex((el) => el.id === id);\n        const oldItem = arr[idx];\n        const newItem = {...oldItem,\n          [propName]: !oldItem[propName]};\n    \n        return [\n            ...arr.slice(0, idx),\n            newItem,\n            ...arr.slice(idx + 1)\n        ];\n    };\n\n    onColorChange = (color) => {\n        this.setState({ color: color.rgb });\n        this.setState({hexColor : color.hex});\n    };\n\n    onSwatchClick = () => {\n        this.setState({ displayColorPicker: !this.state.displayColorPicker });        \n    }\n\n    deleteItem = (id) => {\n        this.setState(({skinLayersData}) => {\n            const index = skinLayersData.findIndex((el) => el.id === id);\n            const newSkinLayersData = [\n                ...skinLayersData.slice(0, index),\n                ...skinLayersData.slice(index + 1)\n            ];\n            return {\n                skinLayersData: newSkinLayersData\n            };\n        });\n    };\n\n    render() {\n        const {skinLayersData,} = this.state;\n        //const visibleLayers = skinLayersData.filter((el) => el.visible);\n//<Library className = \"\"/>\n        return(\n            <div className=\"app\">\n                    <TopPanel/>\n                  \n                \n                <div className=\"row mb2 align-items-top no-gutters align-items-center \">\n                    \n                    <SkinLayers className=\"col-md-3\"\n                                skinLayers={skinLayersData}\n                                onDeleted={this.deleteItem}\n                                onToggleHide={this.onToggleHide}\n                                onToggleChosen={this.onToggleChosen}/>\n\n                    <div className=\"col-md-7\">                        \n                        <Redactor skinLayersData={skinLayersData}\n                                hexColor={this.state.hexColor}/>\n                    </div>\n                    <div className=\"col-md-2 \">\n                        \n                        <Tools\n                            color = {this.state.color}\n                            displayColorPicker = {this.state.displayColorPicker}\n                            onColorChange = {this.onColorChange}\n                            onSwatchClick = {this.onSwatchClick}\n                        />\n                    </div>\n                </div>                \n            </div>\n        )\n    }\n}\n\n","import App from './app';\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.css';\n\n\nimport App from './app'\n\nReactDOM.render(<App/>, document.getElementById('root'));"],"sourceRoot":""}