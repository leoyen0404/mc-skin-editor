(this["webpackJsonpmc-skin-editor_v0"]=this["webpackJsonpmc-skin-editor_v0"]||[]).push([[0],{196:function(e,t,s){},197:function(e,t,s){},198:function(e,t,s){"use strict";s.r(t);var i=s(0),n=s.n(i),a=s(71),o=s.n(a),r=(s(82),s(83),s(3));var c=()=>Object(r.jsx)("div",{className:"pos-f-t",children:Object(r.jsxs)("nav",{className:"navbar ",children:[Object(r.jsx)("h4",{className:" col-md-3",children:"MC Skin Editor"}),Object(r.jsxs)("div",{className:"container col-md-7",children:[Object(r.jsxs)("div",{className:"btn-group",role:"group",children:[Object(r.jsx)("button",{className:"btn ",type:"button",children:"2d"}),Object(r.jsx)("button",{className:"btn ",type:"button",children:"3d"})]}),Object(r.jsxs)("div",{className:"btn-group",role:"group","aria-label":"Basic example",children:[Object(r.jsx)("button",{className:"btn  ",type:"button",children:"undo"}),Object(r.jsx)("button",{className:"btn  ",type:"button",children:"redo"})]}),Object(r.jsxs)("div",{className:"btn-group",role:"group","aria-label":"Basic example",children:[Object(r.jsx)("button",{className:"btn  ",type:"button",children:"-"}),Object(r.jsx)("input",{className:"input ",placeholder:"100%",size:"auto"}),Object(r.jsx)("button",{className:"btn  ",type:"button",children:"+"}),Object(r.jsx)("button",{className:"btn ",type:"button",children:"[+]"})]})]}),Object(r.jsxs)("div",{className:"btn-group col-md-2",role:"group","aria-label":"Basic example",children:[Object(r.jsx)("button",{className:"btn btn-primary",type:"button",children:"AIPhoto"}),Object(r.jsx)("button",{className:"btn btn-primary",type:"button",children:"Export"})]})]})});s(85);class l extends n.a.Component{constructor(){super(...arguments),this.state={id:this.props.id,src:this.props.src,isMain:this.props.isMain,onEdit:!1,onVisible:!1,label:this.props.label}}componentDidMount(){}render(){const{onDeleted:e,onToggleHide:t}=this.props;return this.props.hidden,this.props.chosen,Object(r.jsx)("div",{className:"list-group-item list-group-item-action",children:this.state.isMain?Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{children:this.state.label}),Object(r.jsx)("button",{type:"button",className:"btn btn-outline-info float-right",size:"sm",onClick:t,disabled:!0,children:"hide"})]}):Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{children:this.state.label}),Object(r.jsx)("button",{type:"button",className:"btn btn-outline-danger float-right",onClick:e,children:"del"}),Object(r.jsx)("button",{type:"button",className:"btn btn-outline-info float-right",onClick:t,children:"hide"})]})})}}var d=l;s(86);var p=e=>{let{skinLayers:t,onDeleted:s,onToggleHide:i}=e;const n=t.map((e=>{const{id:t,...n}=e;return Object(r.jsx)("li",{className:"skin-layer",children:Object(r.jsx)(d,{...n,onDeleted:()=>s(t),onToggleHide:()=>i(t)})},t)}));return Object(r.jsxs)("div",{className:"d-block p-1 ",children:[Object(r.jsx)("h5",{children:"SkinLayers"}),Object(r.jsx)("ul",{className:"item-list list-group list-group-flush list-group-item-action",children:n})]})},h=s(4),b=s(72);s(87);let u,m,j,x,f,g,v,y,O,w,N,C=[];var k=0;const D=new h.o,_=new h.s,L=new h.s;function P(e){if(e.preventDefault(),0===e.button){const t=E(O,e.clientX,e.clientY);L.fromArray(t);const s=I(L,m.children);s.length>0&&s[0].uv?x.enabled=!1:x.enabled=!0}}function T(e){e.preventDefault(),x.enabled=!0}function S(e){if(!1===x.enabled){const t=E(O,e.clientX,e.clientY);L.fromArray(t);const s=I(L,m.children);if(s.length>0&&s[0].uv){const e=s[0],t=e.uv,i=e.face.materialIndex;e.object.material[i].map.transformUv(t),g.drawPixel(t.x,t.y)}}}function E(e,t,s){const i=e.getBoundingClientRect();let n=new h.s;return j.getSize(n),[(t-i.left)/n.width,(s-i.top)/n.height]}function I(e,t){return _.set(2*e.x-1,-2*e.y+1),D.setFromCamera(_,u),D.intersectObjects(t)}function M(e){this._canvas=v||null,this._context2D=y||null,this._image=y.createImageData(v.width,v.height),this._data=this._image.data,e&&(this._parentTexture.push(e),e.image=this._canvas)}function R(e,t,s){var i,n,a=[];for(k=0;k<6;k++)a.push(f.clone()),g.addParent(a[k]);i=s?.25:0,n=!!s,a[0].repeat.set(.0625,.1875),a[0].offset.set(.125+e,.5+t),a[1].repeat.set(.0625,.1875),a[1].offset.set(0+e,.5+t),a[2].repeat.set(.0625,.0625),a[2].offset.set(.0625+e,.6875+t),a[3].repeat.set(.0625,.0625),a[3].offset.set(.125+e,.6875+t),a[4].repeat.set(.0625,.1875),a[4].offset.set(.0625+e,.5+t),a[5].repeat.set(.0625,.1875),a[5].offset.set(.1875+e,.5+t);var o=[];for(k=0;k<6;k++)o.push(new h.i({map:a[k],transparent:n,side:h.c}));return new h.h(new h.a(4+i,12+i,4+i),o)}function B(e,t,s){var i,n,a=[];for(k=0;k<6;k++)a.push(f.clone()),g.addParent(a[k]);i=s?.25:0,n=!!s,a[0].repeat.set(.0625,.1875),a[0].offset.set(.125+e,.5+t),a[1].repeat.set(.0625,.1875),a[1].offset.set(0+e,.5+t),a[2].repeat.set(.0625,.0625),a[2].offset.set(.0625+e,.6875+t),a[3].repeat.set(.0625,.0625),a[3].offset.set(.125+e,.6875+t),a[4].repeat.set(.0625,.1875),a[4].offset.set(.0625+e,.5+t),a[5].repeat.set(.0625,.1875),a[5].offset.set(.1875+e,.5+t);var o=[];for(k=0;k<6;k++)o.push(new h.i({map:a[k],transparent:n,side:h.c}));return new h.h(new h.a(4+i,12+i,4+i),o)}function H(e,t,s){var i,n,a=[];for(k=0;k<6;k++)a.push(f.clone()),g.addParent(a[k]);i=s?1:0,n=!!s,a[0].offset.set(.25+e,.75),a[1].offset.set(0+e,.75),a[2].offset.set(.125+e,.875),a[3].offset.set(.375+e,1),a[3].rotation=Math.PI,a[4].offset.set(.125+e,.75),a[5].offset.set(.375+e,.75);var o=[];for(k=0;k<6;k++)a[k].repeat.set(.125,.125),o.push(new h.i({map:a[k],transparent:n,side:h.c}));return new h.h(new h.a(8+i,8+i,8+i),o)}function A(e,t,s){var i,n,a=[];for(k=0;k<6;k++)a.push(f.clone()),g.addParent(a[k]);i=s?.25:0,n=!!s,a[0].repeat.set(.0625,.1875),a[0].offset.set(.4375,.5+t),a[1].repeat.set(.0625,.1875),a[1].offset.set(.25,.5+t),a[2].repeat.set(.125,.0625),a[2].offset.set(.3125,.6875+t),a[3].repeat.set(.125,.0625),a[3].offset.set(.4375,.6875+t),a[4].repeat.set(.125,.1875),a[4].offset.set(.3125,.5+t),a[5].repeat.set(.125,.1875),a[5].offset.set(.5,.5+t);var o=[];for(k=0;k<6;k++)o.push(new h.i({map:a[k],transparent:n,side:h.c}));return new h.h(new h.a(8+i,12+i,4+i),o)}function z(){!function(){const e=j.domElement,t=e.clientWidth,s=e.clientHeight;e.width===t&&e.height===s||(j.setSize(t,s,!1),u.aspect=t/s,u.updateProjectionMatrix())}(),requestAnimationFrame(z),x.update(),j.render(m,u)}function Y(){for(y.clearRect(0,0,v.width,v.height),k=0;k<C.length;k++)C[k].visible&&y.drawImage(C[k].layerCanvas,0,0);g.updateTextures()}function F(e){var t=document.createElement("canvas"),s=t.getContext("2d");if(s.imageSmoothingEnabled=!1,""===e.src)s.clearRect(0,0,64,64),s.fillStyle="#777777",s.beginPath(),s.rect(8,0,16,8),s.rect(0,8,32,8),s.rect(4,16,8,4),s.rect(20,16,16,4),s.rect(44,16,8,4),s.rect(0,20,56,12),s.rect(20,48,8,4),s.rect(36,48,8,4),s.rect(20,52,32,12),s.fill();else var i=(new h.e).load(e.src,(function(){s.drawImage(i,0,0),Y()}));var n={id:e.id,layerCanvas:t,visible:!0};C.push(n)}function X(e){for(k=0;k<e.length;k++)F(e[k]);Y()}M.prototype={constructor:M,_xCross:-1,_yCross:-1,_parentTexture:[],addParent:function(e){-1===this._parentTexture.indexOf(e)&&(this._parentTexture.push(e),e.image=this._canvas)},drawPixel:function(e,t){this._xCross=Math.round(e*this._canvas.width-.5),this._yCross=Math.round(t*this._canvas.height-.5),this._draw()},updateTextures:function(){this._updateTextures()},_updateTextures:function(){for(let e=0;e<this._parentTexture.length;e++)this._parentTexture[e].needsUpdate=!0},_draw:function(){this._context2D&&(this._context2D.drawImage(v,0,0),this._context2D.fillStyle=N||"#000000",this._context2D.beginPath(),this._context2D.rect(this._xCross,this._yCross,1,1),this._context2D.fill(),this._updateTextures())}};class $ extends n.a.Component{componentDidMount(){u=new h.k(80,1,.1,1e3),u.position.set(0,0,40),m=new h.p,j=new h.u({canvas:document.querySelector("canvas"),antialias:!0}),j.setPixelRatio(window.devicePixelRatio),j.setClearColor(5592405),x=new b.a(u,j.domElement),x.target.set(0,0,0),x.mouseButtons={LEFT:h.f.ROTATE,MIDDLE:h.f.ROTATE,MOUSEWHEEL:h.f.DOLLY,RIGHT:h.f.ROTATE},x.minDistance=20,x.maxDistance=50,x.update(),O=document.getElementById("container"),O.appendChild(j.domElement),O.addEventListener("pointermove",S),O.addEventListener("pointerdown",P),O.addEventListener("pointerup",T),function(){v=document.getElementById("drawing-canvas"),y=v.getContext("2d"),v.style.display="none",f=new h.b(v),f.magFilter=h.j,g=new M(f),Y();let e=!1;v.addEventListener("pointerdown",(function(t){0===t.button&&(e=!0),e&&g.drawPixel(t.offsetX/4/64,t.offsetY/4/64)})),v.addEventListener("pointermove",(function(t){e&&g.drawPixel(t.offsetX/4/64,t.offsetY/4/64)})),window.addEventListener("pointerup",(function(){e=!1}))}(),X(this.props.skinLayersData),function(){var e=R(0,0,!1);e.position.set(-2,-10,0);var t=R(.25,-.5,!1);t.position.set(2,-10,0);var s=R(0,-.25,!0);s.position.set(-2.1184,-10,0);var i=R(0,-.5,!0);i.position.set(2.1184,-10,0),m.add(e,t,s,i);var n=B(.625,0,!1);n.position.set(-6,2,0);var a=B(.5,-.5,!1);a.position.set(6,2,0);var o=B(.625,-.25,!0);o.position.set(-6.246,2,0);var r=B(.75,-.5,!0);r.position.set(6.246,2,0),m.add(n,a,o,r);var c=H(0,0,!1);c.position.set(0,12,0);var l=H(.5,0,!0);l.position.set(0,12,0),m.add(c,l);var d=A(0,0,!1);d.position.set(0,2,0);var p=A(0,-.25,!0);p.position.set(0,2,0),m.add(d,p)}(),z()}render(){var e,t;return w!==this.props.skinLayersData.filter((e=>e.visible)).map((e=>e.id))&&(w=this.props.skinLayersData.filter((e=>e.visible)).map((e=>e.id)),e=this.props.skinLayersData,C.forEach((e=>{w.includes(e.id)?e.visible=!0:e.visible=!1})),C.length>0&&Y(),C.length!==e.length&&C.length>0&&X(e)),t=this.props.hexColor,N=t,Object(r.jsxs)("div",{id:"container",className:"align-self-stretch p-1",children:[Object(r.jsx)("canvas",{id:"renderer-canvas",className:"renderer-canvas "}),Object(r.jsx)("canvas",{id:"drawing-canvas",className:"drawing-canvas ",height:"64",width:"64"})]})}}var U=$,q=s(77),J=s(1),W=s.n(J);s(196);class G extends n.a.Component{constructor(){super(...arguments),this.state={displayColorPicker:this.props.displayColorPicker,color:this.props.color},this.handleClick=()=>{this.setState({displayColorPicker:!this.state.displayColorPicker})},this.handleClose=()=>{this.setState({displayColorPicker:!1})},this.handleChange=e=>{this.setState({color:e.rgb}),console.log(e)}}render(){const e=W()({default:{color:{width:"24px",height:"24px",borderRadius:"2px",background:`rgba(${this.props.color.r}, ${this.props.color.g}, ${this.props.color.b}, ${this.state.color.a})`},swatch:{padding:"5px",background:"#fff",borderRadius:"1px",boxShadow:"0 0 0 1px rgba(0,0,0,.1)",display:"inline-block"},popover:{position:"absolute",zIndex:"5"},cover:{position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}}}),{color:t,onColorChange:s,onSwatchClick:i,displayColorPicker:n}=this.props;return Object(r.jsxs)("div",{className:"d-block p-1",children:[Object(r.jsx)("h5",{children:"Tools"}),Object(r.jsxs)("ul",{className:"item-list list-group list-group-flush list-group-item-action",children:[Object(r.jsxs)("li",{className:"list-group-item list-group-item-action",children:[Object(r.jsx)("span",{className:"row justify-content-center",children:"Skin parts"}),Object(r.jsxs)("span",{className:"row ",children:[Object(r.jsx)("span",{className:"col-md-6 justify-content-center",children:"Body"}),Object(r.jsx)("span",{className:"col-md-6 justify-content-center",children:"Overlay"})]}),Object(r.jsxs)("span",{className:"row",children:[Object(r.jsxs)("span",{className:"col-md-6",children:[Object(r.jsx)("span",{className:"row d-flex justify-content-center",children:Object(r.jsx)("div",{className:" body-part",style:{width:"16px",height:"16px"}})}),Object(r.jsxs)("span",{className:"row justify-content-center",children:[Object(r.jsx)("div",{className:" body-part limb",style:{}}),Object(r.jsx)("div",{className:" body-part",style:{width:"16px",height:"24px"}}),Object(r.jsx)("div",{className:" body-part limb",style:{}})]}),Object(r.jsxs)("span",{className:"row justify-content-center",children:[Object(r.jsx)("div",{className:" body-part limb",style:{}}),Object(r.jsx)("div",{className:" body-part limb",style:{}})]})]}),Object(r.jsxs)("span",{className:"col-md-6",children:[Object(r.jsx)("span",{className:"row d-flex justify-content-center",children:Object(r.jsx)("div",{className:" body-part",style:{width:"16px",height:"16px"}})}),Object(r.jsxs)("span",{className:"row justify-content-center",children:[Object(r.jsx)("div",{className:" body-part limb",style:{}}),Object(r.jsx)("div",{className:" body-part",style:{width:"16px",height:"24px"}}),Object(r.jsx)("div",{className:" body-part limb",style:{}})]}),Object(r.jsxs)("span",{className:"row justify-content-center",children:[Object(r.jsx)("div",{className:" body-part limb",style:{}}),Object(r.jsx)("div",{className:" body-part limb",style:{}})]})]})]})]}),Object(r.jsx)("li",{className:"list-group-item list-group-item-action",children:"Bucket"}),Object(r.jsx)("li",{className:"list-group-item list-group-item-action",children:"Pan"}),Object(r.jsxs)("li",{className:"list-group-item list-group-item-action",children:[Object(r.jsx)("label",{children:"Color"}),Object(r.jsx)("div",{className:" float-right",style:e.color,onClick:i}),Object(r.jsx)("div",{children:n?Object(r.jsxs)("div",{style:e.popover,children:[Object(r.jsx)("div",{style:e.cover,onClick:i}),Object(r.jsx)(q.a,{color:t,onChange:s})]}):null})]}),Object(r.jsx)("li",{className:"list-group-item list-group-item-action",children:"Transparent"}),Object(r.jsx)("li",{className:"list-group-item list-group-item-action",children:"Easer"}),Object(r.jsx)("li",{className:"list-group-item list-group-item-action",children:"Random colors"})]})]})}}var V=G;s(197);class K extends n.a.Component{constructor(){super(...arguments),this.maxId=100,this.state={skinLayersData:[this.createSkinLayer("main Layer","",!0),this.createSkinLayer("maid HBomb94","https://texture.namemc.com/ae/fc/aefc9682a40ebaf0.png"),this.createSkinLayer("Ramboob","https://texture.namemc.com/c8/68/c86868b8b045944d.png")],displayColorPicker:!1,color:{r:"0",g:"0",b:"0",a:"1"},hexColor:"#000000"},this.onToggleHide=e=>{this.setState((t=>{let{skinLayersData:s}=t;return{skinLayersData:this.toggleProperty(s,e,"visible")}}))},this.onToggleChosen=e=>{this.setState((t=>{let{skinLayersData:s}=t;return{skinLayersData:this.toggleProperty(s,e,"chosen")}}))},this.onColorChange=e=>{this.setState({color:e.rgb}),this.setState({hexColor:e.hex})},this.onSwatchClick=()=>{this.setState({displayColorPicker:!this.state.displayColorPicker})},this.deleteItem=e=>{this.setState((t=>{let{skinLayersData:s}=t;const i=s.findIndex((t=>t.id===e));return{skinLayersData:[...s.slice(0,i),...s.slice(i+1)]}}))}}createSkinLayer(e,t,s){return void 0===s?{label:e,id:"l"+this.maxId++,src:t,visible:!0,chosen:!1,isMain:!1}:{label:e,id:"l"+this.maxId++,src:t,visible:!0,chosen:!1,isMain:s}}toggleProperty(e,t,s){const i=e.findIndex((e=>e.id===t)),n=e[i],a={...n,[s]:!n[s]};return[...e.slice(0,i),a,...e.slice(i+1)]}render(){const{skinLayersData:e}=this.state;return Object(r.jsxs)("div",{className:"app",children:[Object(r.jsx)(c,{}),Object(r.jsxs)("div",{className:"row mb2 align-items-top no-gutters align-items-center ",children:[Object(r.jsx)(p,{className:"col-md-3",skinLayers:e,onDeleted:this.deleteItem,onToggleHide:this.onToggleHide,onToggleChosen:this.onToggleChosen}),Object(r.jsx)("div",{className:"col-md-7",children:Object(r.jsx)(U,{skinLayersData:e,hexColor:this.state.hexColor})}),Object(r.jsx)("div",{className:"col-md-2 ",children:Object(r.jsx)(V,{color:this.state.color,displayColorPicker:this.state.displayColorPicker,onColorChange:this.onColorChange,onSwatchClick:this.onSwatchClick})})]})]})}}var Q=K;o.a.render(Object(r.jsx)(Q,{}),document.getElementById("root"))},82:function(e,t,s){},83:function(e,t,s){},85:function(e,t,s){},86:function(e,t,s){},87:function(e,t,s){}},[[198,1,2]]]);
//# sourceMappingURL=main.b468b1b5.chunk.js.map